{% set countries = craft.countries.list %}

<section class="modal-card-body">


    {% macro errorList(errors) %}
        {% if errors %}
        <ul class="errors">
            {% for error in errors %}
            <li>{{ error }}</li>
            {% endfor %}
        </ul>
        {% endif %}
    {% endmacro %}

    {% if entry.errors is defined %}
        {% for errorField, error in entry.errors %}
            {% for errorMessage in error %}
            <ul class="form-errors">
                <li>{{ errorField }} - {{ errorMessage }}</li>
            </ul>
            {% endfor %}
        {% endfor %}
    {% endif %}

    {% if entry is defined %}

        {% if entry.errors|length > 0 %}

        <div>
            <h3>There was a problem with your submission:</h3>
            {% for error in entry.errors %}
            {% for errormessage in error %}
            <p>{{errormessage}}</p>
            {% endfor %}
            {% endfor %}
        </div>
        {% endif %}
    {% endif %}

    {% from _self import errorList %}

    <form method="post" action="?" enctype="multipart/form-data" accept-charset="UTF-8">
        <input name="MAX_FILE_SIZE" type="hidden" value="67108864">
        {{ csrfInput() }}
        <input type="hidden" name="action" value="guest-entries/save">
        <input type="hidden" name="sectionUid" value="9e95c96f-502f-4eeb-a3ec-cdad22ea197a">
        <input id="slug" type="hidden" name="slug" value="{{'now'|date('U') }}">

        {{ redirectInput('teams/success') }}

        <h3 class="title is-2" style="margin-top: 1rem">Team and player information:</h3>
        <p>
            This is to know who you are and what event you play. We will double-check this with regional representatives.
        </p>
        <div class="field is-horizontal">
            <div class="field-label is-normal">
                <label class="label" for="teamEvent">EHBC Event</label>
            </div>
            <div class="field-body">
                <div class="field is-narrow">
                    <div class="control">
                        <div class="select is-fullwidth">
                            <select required aria-required="true" name="fields[teamEvent]" id="teamEvent" required>
                                <option value="">Select Event</option>
                                <option value="MAIN"> EHBC 2020 Main Event</option>
                                <option value="WILDCARD">EHBC 2020 Wilcard</option>
                                <option value="NOTSURE">I Am Not Sure</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        {% if entry is defined %}
        <p class="help is-danger">
            {{ errorList(entry.getErrors('teamEvent')) }}
        </p>
        {% endif %}

        <div class="field is-horizontal">
            <div class="field-label is-normal">
                <label class="label" for="teamName">Team Name</label>
            </div>
            <div class="field-body">
                <div class="field">
                    <p class="control">
                        <input required class="input" type="text" placeholder="Team Name" id="teamName" name="fields[teamName]" {%- if entry is defined %} value="{{ entry.teamName }}"{% endif %}>
                    </p>
                </div>
            </div>
        </div>
        {% if entry is defined %}
        <p class="help is-danger">
            {{ errorList(entry.getErrors('teamName')) }}
        </p>
        {% endif %}
        <div class="field is-horizontal">
            <div class="field-label is-normal">
                <label class="label" for="teamContactEmail"> Contact Email</label>
            </div>
            <div class="field-body">
                <div class="field">
                    <p class="control">
                        <input required class="input" type="text" placeholder="Team Contact Email" id="teamContactEmail" name="fields[teamContactEmail]" {%- if entry is defined %} value="{{ entry.teamContactEmail }}"{% endif %}>
                    </p>
                </div>
            </div>
        </div>
        {% if entry is defined %}
        <p class="help is-danger">
            {{ errorList(entry.getErrors('teamName')) }}
        </p>
        {% endif %}


        {#
        <div class="field is-horizontal">
            <div class="field-label is-normal">
                <label class="label" for="teamCountry">Team Country</label>
            </div>
            <div class="field-body">
                <div class="field is-narrow">
                    <div class="control">
                        <div class="select is-fullwidth">
                            <select name="fields[teamCountry]" id="teamCountry">
                                <option>Select country</option>

                                {% for country in countries| supersort('asort', null, SORT_STRING) %}
                                <option value="{{ country.code }}">{{ country.name }}</option>
                                {% endfor %}

                            </select>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        #}

        {% for k, player in [1,2,3,4] %}
        <hr>
        <h3 class="title is-4">Player {{player}} Info</h3>

        <!-- player name -->
        <div class="field is-horizontal">
            <div class="field-label is-normal">
                <label class="label" for="player{{player}}Name"> Name</label>
            </div>
            <div class="field-body">

                <div class="field">
                    <p class="control">
                        <input required class="input" type="text" placeholder="Player {{player}} Name" id="player{{player}}Name" name="fields[teamPlayer{{player}}Name]" >
                    </p>
                </div>
            </div>
        </div>
        <!-- player name -->
        <div class="field is-horizontal">
            <div class="field-label is-normal">
                <label class="label" for="player{{player}}Name"> Contact </label>
            </div>
            <div class="field-body">

                <div class="field">
                    <p class="control">
                        <input required class="input" type="text" placeholder="Player {{player}} Contact" id="player{{player}}Contact" name="fields[teamPlayer{{player}}Contact]" >
                    </p>
                    <p class="is-small">
                        <small class="is-small">Please enter email and phone (international format)</small>
                    </p>
                </div>
            </div>
        </div>
        <!-- player city -->
        <div class="field is-horizontal">
            <div class="field-label is-normal">
                <label class="label" for="teamPlayer{{player}}City"> City</label>
            </div>
            <div class="field-body">

                <div class="field">
                    <p class="control">
                        <input required class="input" type="text" placeholder="Player {{player}} City" id="teamPlayer{{player}}City" name="fields[teamPlayer{{player}}City]" >
                    </p>
                </div>
            </div>
        </div>
        <!-- player country -->
        <div class="field is-horizontal">
            <div class="field-label is-normal">
                <label class="label" for="teamPlayer{{player}}Country">Country</label>
            </div>
            <div class="field-body">
                <div class="field is-narrow">
                    <div class="control">
                        <div class="select is-fullwidth">
                            <select required name="fields[teamPlayer{{player}}Country]" id="teamPlayer{{player}}Country">
                                <option>Select country</option>
                                {% for country in countries| supersort('asort', null, SORT_STRING) %}
                                <option value="{{ country.code }}">{{ country.name }}</option>
                                {% endfor %}

                            </select>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        {% endfor %}

        <h3 class="title is-4">Picture</h3>

        <!-- player city -->
        <div class="field is-horizontal">
            <div class="field-label is-normal">
                <label class="label" for="teamPicture"> Team Picture</label>
            </div>
            <div class="field-body">

                <div class="field">
                    <p class="control">
                        <input required type="file" class="input" name="fields[teamPicture]" id="teamPicture" placeholder="Team Picture image file">

                    </p>
                </div>
            </div>
        </div>

<p>
    <hr>
</p>



        <h3 class="title is-2" style="margin-top: 1rem">Reffing:</h3>
        <p>
            The tournament will not work without Referees. We ask all teams to take part!
        </p>
        <div class="field ">
            <div class="field-label is-normal">
                <label class="label has-text-left" for="teamRefereree">Who will help with reffing? and in what capacity? ( main/assistant/Marshall)
                </label>
            </div>
            <div class="field-body">
                <div class="field">
                    <p class="control">

                        <textarea class="textarea" type="text" placeholder="" id="teamRefereree" name="fields[teamRefereree]" rows="6">
                            {% if entry is defined %} {{ entry.teamRefereree }}{% endif %}</textarea>

                    </p>
                </div>
            </div>
        </div>

        <p>
        <hr>
        </p>

        <h3 class="title is-2" style="margin-top: 1rem">Section 3, Travel:</h3>

        <p>
            Munich bike polo would greatly apreciate any help with the setup and  pull down of the court.
        </p>

        <div class="field ">
            <div class="field-label is-normal">
                <label class="label has-text-left" for="teamcourtsetup">Who from your team will be able to assist with court setup on Monday (7/9/20)</label>
            </div>
            <div class="field-body">
                <div class="field">
                    <p class="control">

                        <textarea class="textarea" type="text" placeholder="" id="teamcourtsetup" name="fields[teamcourtsetup]" rows="6">
                            {% if entry is defined %} {{ entry.teamcourtsetup }}{% endif %}</textarea>
                    </p>
                </div>
            </div>
        </div>

        <div class="field ">
            <div class="field-label is-normal">
                <label class="label has-text-left" for="teamCourtPullDown">Who from your team will be able to assist with court pull down on Sunday (13/9/20)</label>
            </div>
            <div class="field-body">
                <div class="field">
                    <p class="control">

                        <textarea class="textarea" type="text" placeholder="" id="teamCourtPullDown" name="fields[teamCourtPullDown]" rows="6">
                            {% if entry is defined %} {{ entry.teamCourtPullDown }}{% endif %}</textarea>
                    </p>
                </div>
            </div>
        </div>


        <p>
            In the event of a low subscribption, it it possible that the main event will begin a day earlier.
        </p>
        <div class="field ">
            <div class="field-label is-normal">
                <label class="label has-text-left" for="teamAvailableFromWednesday">Will your team be available to play on Wednesday (9/9/20)?</label>
            </div>
            <div class="field-body">
                <div class="field">
                    <p class="control">

                        <textarea class="textarea" type="text" placeholder="" id="teamAvailableFromWednesday" name="fields[teamAvailableFromWednesday]" rows="6">
                            {% if entry is defined %} {{ entry.teamAvailableFromWednesday }}{% endif %}</textarea>
                    </p>
                </div>
            </div>
        </div>


        <p>
            We are required to inform the city of total numbers, and  to have contact  details of all attendees. This includes acompayning friends and family.
        </p>

        <div class="field ">
            <div class="field-label is-normal">
                <label class="label has-text-left" for="teamAccompany">If others may be joining  you please let us  know  here:</label>
            </div>
            <div class="field-body">
                <div class="field">
                    <p class="control">

                        <textarea class="textarea" type="text" placeholder="" id="teamAccompany" name="fields[teamAccompany]" rows="6">
                            {% if entry is defined %} {{ entry.teamAccompany }}{% endif %}</textarea>
                    </p>
                </div>
            </div>
        </div>






        <p>
        <hr>
        </p>
        <h3 class="title is-2" style="margin-top: 1rem"> Food:</h3>

        <div class="field ">
            <div class="field-label is-normal">
                <label class="label has-text-left" for="teamDiatery">Does anyone from  your team have any dietary requirements?</label>
            </div>
            <div class="field-body">
                <div class="field">
                    <p class="control">

                        <textarea class="textarea" type="text" placeholder="" id="teamDiatery" name="fields[teamDiatery]" rows="6">
                            {% if entry is defined %} {{ entry.teamDiatery }}{% endif %}</textarea>
                    </p>
                </div>
            </div>
        </div>


        <p>
        <hr>
        </p>
        <h3 class="title is-2" style="margin-top: 1rem"> Comments:</h3>

        <div class="field ">
            <div class="field-label is-normal">
                <label class="label has-text-left" for="teamRegistrationGeneralComment">If there is anything else you want to tell us please put it here: :</label>
            </div>
            <div class="field-body">
                <div class="field">
                    <p class="control">
                        <textarea class="textarea" type="text" placeholder="" id="teamRegistrationGeneralComment" name="fields[teamRegistrationGeneralComment]" rows="6">
                            {% if entry is defined %} {{ entry.teamRegistrationGeneralComment }}{% endif %}</textarea>
                    </p>
                </div>
            </div>
        </div>



        <p>
        <hr>
        </p>


        <div class="field is-horizontal">
            <div class="field-label">
                <!-- Left empty for spacing -->
            </div>
            <div class="field-body">
                <div class="field">
                    <div class="control has-text-right">
                        <button type="submit" class="button is-primary">
                            Register
                        </button>
                    </div>
                </div>
            </div>
        </div>

    </form>
</section>

